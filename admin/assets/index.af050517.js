import{a as _,c as D,b as L,d as P,e as V,f as v,r as O,g as N,h as M,o as S,i as C,u as m,j as x}from"./vendor.8f3151c5.js";const w=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))r(n);new MutationObserver(n=>{for(const i of n)if(i.type==="childList")for(const s of i.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function o(n){const i={};return n.integrity&&(i.integrity=n.integrity),n.referrerpolicy&&(i.referrerPolicy=n.referrerpolicy),n.crossorigin==="use-credentials"?i.credentials="include":n.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(n){if(n.ep)return;n.ep=!0;const i=o(n);fetch(n.href,i)}};w();const j={admin:{VUE_APP_API_BASE_URL:"http://localhost/sagent/server/public/api/",VUE_APP_BASE_URL:"http://localhost",VUE_APP_DOMAIN_PREFIX:"/",VUE_APP_OUTPUT_DIR:"admin",VUE_APP_INDEX_PATH:"/admin/index.html",VUE_APP_ENTRY:"admin/index",VUE_APP_PORT:"4444",VUE_APP_COOKIE_PREFIX:"admin_",VUE_APP_CHECK_PERMISSION:"false",VUE_APP_CLIENT_ID:"eyJpdiI6ImRUTEJsdTJSVldzM0ZNK1dpQysxc0E9PSIsInZhbHVlIjoieDJxQ051Y2VEZStHK1ZYY1dPYWduUT09IiwibWFjIjoiMWMzNTE0YjNkMjRkNjg4NjA0MzE1YmJjNTI2MTA0NjM4MzYzMmIxMTY5YmE5YmEwMzRjMGVjYThiYmJhNTg2MiIsInRhZyI6IiJ9",VUE_APP_SOCKET_URL:"https://broadcast-server.herokuapp.com"},front:{VUE_APP_API_BASE_URL:"http://localhost/sagent/server/public/api/"}};function c(e){return e.replace(/^\/+/g,"").replace(/\/+$/g,"")}function k(e){this.portalName=e;const t=j[e];this.getBaseUrl=function(){return t.VUE_APP_BASE_URL},this.getAssetsUrl=function(){return t.VUE_APP_ASSETS_URL?t.VUE_APP_ASSETS_URL:t.VUE_APP_DOMAIN_PREFIX},this.getDomianPrefix=function(){return t.VUE_APP_DOMAIN_PREFIX},this.getOutputDir=function(){return t.VUE_APP_OUTPUT_DIR},this.getIndexFilePath=function(){return t.VUE_APP_INDEX_PATH},this.isMultiLogin=function(){return t.VUE_APP_MULTI_LOGIN},this.getEntry=function(){return t.VUE_APP_ENTRY},this.getApiBaseUrl=function(){return t.VUE_APP_API_BASE_URL},this.getWebBaseUrl=function(){return t.VUE_APP_WEB_BASE_URL},this.get=function(o){return t[o]},this.getPort=function(){return t.VUE_APP_PORT},this.getStorageUrl=function(){return t.VUE_APP_STORAGE_URL},this.getClientId=function(){return t.VUE_APP_CLIENT_ID},this.getPortalUrl=function(o){let r=[c(this.getBaseUrl())],n=c(this.getDomianPrefix());return n&&r.push(n),o&&r.push(c(o)),r.join("/")},this.getLandingUrl=function(o,r){return o&&this.isMultiLogin()?this.getPortalUrl("u/"+o):this.getPortalUrl(r)},this.getRouterBaseUri=function(){const o=window.location.toString().match(/\/u\/[0-9]+\/?/g);let r=[];return this.getDomianPrefix()&&r.push(c(this.getDomianPrefix())),o&&this.isMultiLogin()&&r.push(c(o[0])),c(r.filter(n=>n).join("/"))+"/"}}const u=new k("admin"),h=u.get("VUE_APP_COOKIE_PREFIX")?u.get("VUE_APP_COOKIE_PREFIX"):"",g=h+"X-TOKEN",B=h+"X-REFRESH-TOKEN",b="DEVICE-ID",X=()=>_.get(g),H=()=>_.get(b),A=()=>_.remove(g),U=()=>_.remove(B),Y={profile:null};var f;(function(e){e.CHANGE="CHANGE",e.UPDATE="UPDATE",e.MIX="MIX",e.DELETE="DELETE"})(f||(f={}));const K={async[f.CHANGE]({commit:e},{data:t}){e(a.CHANGE,t)},async[f.MIX]({commit:e},{data:t}){e(a.MIX,t.data)},async[f.DELETE]({commit:e}){e(a.DELETE,null)}};var a;(function(e){e.CHANGE="CHANGE",e.UPDATE="UPDATE",e.MIX="MIX",e.DELETE="DELETE"})(a||(a={}));const G={[a.CHANGE](e,t){e.profile=t},[a.UPDATE](e,t){},[a.MIX](e,t){},[a.DELETE](e,t){e.profile=t}};var F={state:Y,mutations:G,actions:K};const z={authProfile:e=>e.profile?e.profile.profile:null,permissions:e=>e.profile&&e.profile.profile&&e.profile.profile.permissions?e.profile.profile.permissions:[]},d=D({plugins:[L()],modules:{profile:F},getters:z});function $(){return new Date().getTimezoneOffset()}const q=P.CancelToken;P.defaults.headers.post["Content-Type"]="application/x-www-form-urlencoded";console.log(u.getApiBaseUrl());let J={baseURL:u.getApiBaseUrl()},l=P.create(J);l.defaults.headers.common["client-id"]=u.getClientId();l.defaults.headers.common.Accept="application/json, text/plain, */*";l.interceptors.request.use(e=>{const t=X();return t&&(e.headers.Authorization="Bearer "+t),e.headers["device-id"]=H(),e.headers["time-offset"]=$(),e},e=>Promise.reject(e));l.interceptors.response.use(e=>e.data,e=>(e&&e.request&&e.request.status===401&&(A(),U()),Promise.reject(e)));var W={install:(e,t)=>{e.config.globalProperties.$axios=l,e.config.globalProperties.$_axios=l}};const Z="modulepreload",I={},Q="/",p=function(t,o){return!o||o.length===0?t():Promise.all(o.map(r=>{if(r=`${Q}${r}`,r in I)return;I[r]=!0;const n=r.endsWith(".css"),i=n?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${r}"]${i}`))return;const s=document.createElement("link");if(s.rel=n?"stylesheet":Z,n||(s.as="script",s.crossOrigin=""),s.href=r,document.head.appendChild(s),n)return new Promise((R,y)=>{s.addEventListener("load",R),s.addEventListener("error",y)})})).then(()=>t())};console.log(u.getApiBaseUrl());const ee=[{path:"/",name:"Home",component:()=>p(()=>import("./index.86570e2a.js"),["assets/index.86570e2a.js","assets/plugin-vue_export-helper.5a098b48.js","assets/vendor.8f3151c5.js"])},{path:"/about",name:"About",component:()=>p(()=>import("./index.a74672e6.js"),["assets/index.a74672e6.js","assets/plugin-vue_export-helper.5a098b48.js","assets/vendor.8f3151c5.js"])},{path:"/admin-app",name:"Admin App",component:()=>p(()=>import("./adminApp.67353916.js"),["assets/adminApp.67353916.js","assets/vendor.8f3151c5.js","assets/plugin-vue_export-helper.5a098b48.js"])}],T=V({history:v(u.getRouterBaseUri()),routes:ee});function te(){const e=O(!1);return{myProfile:async r=>await l.get(r,{cancelToken:new q(function(i){})}).then(async n=>(console.log(n.data.user),await d.dispatch(f.CHANGE,{key:a.DELETE,data:n.data.user}),new Promise(i=>{i(n.data)}))).catch(n=>new Promise((i,s)=>{s(n.data)})).finally(()=>{e.value=!0}),finished:e,logOutUser:r=>l({url:"logout",method:"POST",data:{socket_id:r}}).finally(()=>(A(),U(),d.dispatch("profile/delete"),T.push("/"),new Promise(n=>{n(!0)})))}}function ne(e){switch(e){default:return new Promise(function(t,o){(typeof queueMicrotask=="function"?queueMicrotask:setTimeout)(o.bind(null,new Error("Unknown variable dynamic import: "+e)))})}}const re=N({setup(e){const{myProfile:t,finished:o}=te();t("my-profile").then(()=>{});const r=M(()=>ne("./views/"+u.getEntry()+".vue"));return(n,i)=>(S(),C(m(r),{"auth-loading":m(o)},null,8,["auth-loading"]))}});console.log({BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0});const E=x(re);E.use(W);E.use(d);E.use(T);E.mount("#app");
