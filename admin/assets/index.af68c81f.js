var v=Object.defineProperty;var E=Object.getOwnPropertySymbols;var O=Object.prototype.hasOwnProperty,M=Object.prototype.propertyIsEnumerable;var m=(e,t,n)=>t in e?v(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,P=(e,t)=>{for(var n in t||(t={}))O.call(t,n)&&m(e,n,t[n]);if(E)for(var n of E(t))M.call(t,n)&&m(e,n,t[n]);return e};import{a as c,c as S,b as p,d as N,e as L,r as x,f as D,g as j,o as Y,h as b,u as h,i as B}from"./vendor.70a8950f.js";const w=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))o(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const s of i.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&o(s)}).observe(document,{childList:!0,subtree:!0});function n(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerpolicy&&(i.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?i.credentials="include":r.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function o(r){if(r.ep)return;r.ep=!0;const i=n(r);fetch(r.href,i)}};w();const C={admin:{VUE_APP_API_BASE_URL:"http://localhost/sagent/server/public/api/",VUE_APP_WEB_BASE_URL:"http://localhost/sagent/server/public/",VUE_APP_BASE_URL:"http://localhost:4444",VUE_APP_DOMAIN_PREFIX:"/vite-vue3/admin/",VUE_APP_OUTPUT_DIR:"/admin/",VUE_APP_INDEX_PATH:"/admin/index.html",VUE_APP_ENTRY:"admin/index",VUE_APP_PORT:"4444",VUE_APP_COOKIE_PREFIX:"admin_",VUE_APP_CHECK_PERMISSION:"false",VUE_APP_CLIENT_ID:"eyJpdiI6ImRUTEJsdTJSVldzM0ZNK1dpQysxc0E9PSIsInZhbHVlIjoieDJxQ051Y2VEZStHK1ZYY1dPYWduUT09IiwibWFjIjoiMWMzNTE0YjNkMjRkNjg4NjA0MzE1YmJjNTI2MTA0NjM4MzYzMmIxMTY5YmE5YmEwMzRjMGVjYThiYmJhNTg2MiIsInRhZyI6IiJ9",VUE_APP_SOCKET_URL:"https://broadcast-server.herokuapp.com"},front:{VUE_APP_API_BASE_URL:"http://localhost/sagent/server/public/api/",VUE_APP_WEB_BASE_URL:"http://localhost/sagent/server/public/",VUE_APP_BASE_URL:"http://localhost:4444",VUE_APP_DOMAIN_PREFIX:"/",VUE_APP_OUTPUT_DIR:"/admin/",VUE_APP_INDEX_PATH:"/admin/index.html",VUE_APP_PORT:"4444",VUE_APP_COOKIE_PREFIX:"admin_",VUE_APP_CHECK_PERMISSION:"false",VUE_APP_CLIENT_ID:"eyJpdiI6ImRUTEJsdTJSVldzM0ZNK1dpQysxc0E9PSIsInZhbHVlIjoieDJxQ051Y2VEZStHK1ZYY1dPYWduUT09IiwibWFjIjoiMWMzNTE0YjNkMjRkNjg4NjA0MzE1YmJjNTI2MTA0NjM4MzYzMmIxMTY5YmE5YmEwMzRjMGVjYThiYmJhNTg2MiIsInRhZyI6IiJ9",VUE_APP_SOCKET_URL:"https://broadcast-server.herokuapp.com"}};function u(e){return e.replace(/^\/+/g,"").replace(/\/+$/g,"")}function k(e){this.portalName=e;const t=C[e];this.getBaseUrl=function(){return t.VUE_APP_BASE_URL},this.getAssetsUrl=function(){return t.VUE_APP_ASSETS_URL?t.VUE_APP_ASSETS_URL:t.VUE_APP_DOMAIN_PREFIX},this.getDomianPrefix=function(){return t.VUE_APP_DOMAIN_PREFIX},this.getOutputDir=function(){return t.VUE_APP_OUTPUT_DIR},this.getIndexFilePath=function(){return t.VUE_APP_INDEX_PATH},this.isMultiLogin=function(){return t.VUE_APP_MULTI_LOGIN},this.getEntry=function(){return t.VUE_APP_ENTRY},this.getApiBaseUrl=function(){return t.VUE_APP_API_BASE_URL},this.getWebBaseUrl=function(){return t.VUE_APP_WEB_BASE_URL},this.get=function(n){return t[n]},this.getPort=function(){return t.VUE_APP_PORT},this.getStorageUrl=function(){return t.VUE_APP_STORAGE_URL},this.getClientId=function(){return t.VUE_APP_CLIENT_ID},this.getPortalUrl=function(n){let o=[u(this.getBaseUrl())],r=u(this.getDomianPrefix());return r&&o.push(r),n&&o.push(u(n)),o.join("/")},this.getLandingUrl=function(n,o){return n&&this.isMultiLogin()?this.getPortalUrl("u/"+n):this.getPortalUrl(o)},this.getRouterBaseUri=function(){const n=window.location.toString().match(/\/u\/[0-9]+\/?/g);let o=[];return this.getDomianPrefix()&&o.push(u(this.getDomianPrefix())),n&&this.isMultiLogin()&&o.push(u(n[0])),u(o.filter(r=>r).join("/"))+"/"}}const a=new k("admin"),A=a.get("VUE_APP_COOKIE_PREFIX")?a.get("VUE_APP_COOKIE_PREFIX"):"",U=A+"X-TOKEN",K=A+"X-REFRESH-TOKEN",z="DEVICE-ID",J=()=>c.get(U),F=()=>c.get(z),g=()=>c.remove(U),I=()=>c.remove(K),X={profile:null},H={set({commit:e},{data:t}){e("change",{data:t})},update({commit:e},{key:t,value:n}){e("update",{key:t,value:n})},mix({commit:e},{value:t}){e("mix",{value:t})},delete({commit:e}){e("delete")}},W={change(e,{data:t}){e.profile=t},update(e,{key:t,value:n}){helper.setProp(e.profile,t,n,!0)},mix(e,{value:t}){e.profile=P(P({},e.profile),t)},delete(e){e.profile=null}};var Z={namespaced:!0,state:X,actions:H,mutations:W};const $={authProfile:e=>e.profile?e.profile.profile:null,permissions:e=>e.profile&&e.profile.profile&&e.profile.profile.permissions?e.profile.profile.permissions:[]},f=S({state:{count:0},mutations:{},actions:{},modules:{profile:Z},getters:$});function q(){return new Date().getTimezoneOffset()}const G=p.CancelToken;p.defaults.headers.post["Content-Type"]="application/x-www-form-urlencoded";console.log(a.getApiBaseUrl());let Q={baseURL:a.getApiBaseUrl()},l=p.create(Q);l.defaults.headers.common["client-id"]=a.getClientId();l.defaults.headers.common.Accept="application/json, text/plain, */*";l.interceptors.request.use(e=>{const t=J();return t&&(e.headers.Authorization="Bearer "+t),e.headers["device-id"]=F(),e.headers["time-offset"]=q(),e},e=>Promise.reject(e));l.interceptors.response.use(e=>e.data,e=>(e&&e.request&&e.request.status===401&&(g(),I()),Promise.reject(e)));var ee={install:(e,t)=>{e.config.globalProperties.$axios=l,e.config.globalProperties.$_axios=l}};const te="modulepreload",T={},ne="/vite-vue3/admin/",d=function(t,n){return!n||n.length===0?t():Promise.all(n.map(o=>{if(o=`${ne}${o}`,o in T)return;T[o]=!0;const r=o.endsWith(".css"),i=r?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${o}"]${i}`))return;const s=document.createElement("link");if(s.rel=r?"stylesheet":te,r||(s.as="script",s.crossOrigin=""),s.href=o,document.head.appendChild(s),r)return new Promise((V,y)=>{s.addEventListener("load",V),s.addEventListener("error",y)})})).then(()=>t())};console.log(a.getApiBaseUrl());const re=[{path:"/",name:"Home",component:()=>d(()=>import("./index.8b255e41.js"),["assets/index.8b255e41.js","assets/plugin-vue_export-helper.5a098b48.js","assets/vendor.70a8950f.js"])},{path:"/about",name:"About",component:()=>d(()=>import("./index.12d478c8.js"),["assets/index.12d478c8.js","assets/plugin-vue_export-helper.5a098b48.js","assets/vendor.70a8950f.js"])},{path:"/admin-app",name:"Admin App",component:()=>d(()=>import("./adminApp.3c27d928.js"),["assets/adminApp.3c27d928.js","assets/vendor.70a8950f.js","assets/plugin-vue_export-helper.5a098b48.js"])}],R=N({history:L(a.getRouterBaseUri()),routes:re});function oe(){const e=x(!1);return{myProfile:async o=>await l.get(o,{cancelToken:new G(function(i){})}).then(async r=>(await f.dispatch("profile/set",{data:r.data.user}),new Promise(i=>{i(r.data)}))).catch(r=>new Promise((i,s)=>{s(r.data)})).finally(()=>{e.value=!0}),finished:e,logOutUser:o=>l({url:"logout",method:"POST",data:{socket_id:o}}).finally(()=>(g(),I(),f.dispatch("profile/delete"),R.push("/"),new Promise(r=>{r(!0)})))}}function ie(e){switch(e){default:return new Promise(function(t,n){(typeof queueMicrotask=="function"?queueMicrotask:setTimeout)(n.bind(null,new Error("Unknown variable dynamic import: "+e)))})}}const se=D({setup(e){const{myProfile:t,finished:n}=oe();t("my-profile").then(()=>{});const o=j(()=>ie("./views/"+a.getEntry()+".vue"));return(r,i)=>(Y(),b(h(o),{"auth-loading":h(n)},null,8,["auth-loading"]))}});console.log({BASE_URL:"/vite-vue3/admin/",MODE:"production",DEV:!1,PROD:!0});const _=B(se);_.use(ee);_.use(f);_.use(R);_.mount("#app");
